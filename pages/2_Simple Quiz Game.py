import streamlit as st
import random

# --- 1. í€´ì¦ˆ ë°ì´í„° (ì¼ë°˜ìƒì‹ 100ê°€ì§€) ---
ALL_QUIZ_QUESTIONS = [
    # ê¸°ë³¸ ìƒì‹ (20ê°œ)
    {"question": "1ë…„ì€ ëª‡ ê°œì›”ì¸ê°€?", "options": ["10ê°œì›”", "11ê°œì›”", "12ê°œì›”", "13ê°œì›”"], "answer": "12ê°œì›”"},
    {"question": "1ì£¼ì¼ì€ ë©°ì¹ ì¸ê°€?", "options": ["5ì¼", "6ì¼", "7ì¼", "8ì¼"], "answer": "7ì¼"},
    {"question": "1ì‹œê°„ì€ ëª‡ ë¶„ì¸ê°€?", "options": ["50ë¶„", "60ë¶„", "70ë¶„", "80ë¶„"], "answer": "60ë¶„"},
    {"question": "1ë¶„ì€ ëª‡ ì´ˆì¸ê°€?", "options": ["50ì´ˆ", "60ì´ˆ", "70ì´ˆ", "80ì´ˆ"], "answer": "60ì´ˆ"},
    {"question": "ì˜¤ëŠ˜ì˜ ë°˜ëŒ€ëŠ”?", "options": ["ì–´ì œ", "ë‚´ì¼", "ëª¨ë ˆ", "ê¸€í”¼"], "answer": "ë‚´ì¼"},
    {"question": "ê³„ì ˆì€ ì´ ëª‡ ê°œì¸ê°€?", "options": ["2ê°œ", "3ê°œ", "4ê°œ", "5ê°œ"], "answer": "4ê°œ"},
    {"question": "ë´„ ë‹¤ìŒ ê³„ì ˆì€?", "options": ["ê°€ì„", "ê²¨ìš¸", "ì—¬ë¦„", "ë´„"], "answer": "ì—¬ë¦„"},
    {"question": "í•œêµ­ì˜ ìˆ˜ë„ëŠ”?", "options": ["ë¶€ì‚°", "ëŒ€êµ¬", "ì„œìš¸", "ì¸ì²œ"], "answer": "ì„œìš¸"},
    {"question": "ì„¸ê³„ì—ì„œ ê°€ì¥ í° ëŒ€ì–‘ì€?", "options": ["ëŒ€ì„œì–‘", "ì¸ë„ì–‘", "íƒœí‰ì–‘", "ë¶ê·¹í•´"], "answer": "íƒœí‰ì–‘"},
    {"question": "ì¸ê°„ì€ ëª‡ ê°œì˜ ë‹¤ë¦¬ê°€ ìˆëŠ”ê°€?", "options": ["1ê°œ", "2ê°œ", "3ê°œ", "4ê°œ"], "answer": "2ê°œ"},
    {"question": "ì¸ê°„ì€ ëª‡ ê°œì˜ ì†ê°€ë½ì´ ìˆëŠ”ê°€?", "options": ["8ê°œ", "9ê°œ", "10ê°œ", "12ê°œ"], "answer": "10ê°œ"},
    {"question": "ìƒˆëŠ” ëª‡ ê°œì˜ ë‚ ê°œê°€ ìˆëŠ”ê°€?", "options": ["1ê°œ", "2ê°œ", "3ê°œ", "4ê°œ"], "answer": "2ê°œ"},
    {"question": "ë¬¼ê³ ê¸°ëŠ” ì–´ë–»ê²Œ í˜¸í¡í•˜ëŠ”ê°€?", "options": ["íë¡œ", "ì•„ê°€ë¯¸ë¡œ", "í”¼ë¶€ë¡œ", "ì…ìœ¼ë¡œ"], "answer": "ì•„ê°€ë¯¸ë¡œ"},
    {"question": "ì¸ê°„ì€ ì–´ë–¤ ë™ë¬¼ì¸ê°€?", "options": ["í¬ìœ ë¥˜", "ì¡°ë¥˜", "íŒŒì¶©ë¥˜", "ì–‘ì„œë¥˜"], "answer": "í¬ìœ ë¥˜"},
    {"question": "íƒœì–‘ì€ ëª‡ ì‹œì— ëœ¨ëŠ”ê°€?", "options": ["ìì •", "í•´ì§ˆë…˜", "ìƒˆë²½", "ì •ì˜¤"], "answer": "ìƒˆë²½"},
    {"question": "ë³„ì€ ì–¸ì œ ë³´ì´ëŠ”ê°€?", "options": ["ë‚®", "ë°¤", "ì˜¤í›„", "ì•„ì¹¨"], "answer": "ë°¤"},
    {"question": "ë¬´ì§€ê°œëŠ” ëª‡ ê°€ì§€ ìƒ‰ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆëŠ”ê°€?", "options": ["5ê°€ì§€", "6ê°€ì§€", "7ê°€ì§€", "8ê°€ì§€"], "answer": "7ê°€ì§€"},
    {"question": "ë¹¨ê°„ìƒ‰ê³¼ íŒŒë€ìƒ‰ì„ ì„ìœ¼ë©´ ë¬´ì—‡ì´ ë˜ëŠ”ê°€?", "options": ["ì£¼í™©ìƒ‰", "ìì£¼ìƒ‰", "ì´ˆë¡ìƒ‰", "ë…¸ë€ìƒ‰"], "answer": "ìì£¼ìƒ‰"},
    {"question": "ì–¼ìŒì€ ë¬¼ì„ ì–´ë–»ê²Œ í•œ ê²ƒì¸ê°€?", "options": ["ë°ìš´ ê²ƒ", "ì‹íŒ ê²ƒ", "ë…¹ì¸ ê²ƒ", "ë“ì¸ ê²ƒ"], "answer": "ì‹íŒ ê²ƒ"},
    {"question": "ë¬¼ì´ ë“ì„ ë•Œ ë‚˜ì˜¤ëŠ” í•˜ì–€ ê²ƒì€?", "options": ["ì—°ê¸°", "ìˆ˜ì¦ê¸°", "ê¹€", "ì—°ë¬´"], "answer": "ìˆ˜ì¦ê¸°"},
    
    # ë™ë¬¼ (15ê°œ)
    {"question": "ê°€ì¥ í° ë™ë¬¼ì€?", "options": ["ì½”ë¼ë¦¬", "ê¸°ë¦°", "ê³ ë˜", "í•˜ë§ˆ"], "answer": "ê³ ë˜"},
    {"question": "ê°€ì¥ ë¹ ë¥¸ ìœ¡ì§€ ë™ë¬¼ì€?", "options": ["ì‚¬ì", "ì¹˜íƒ€", "ë§", "ì˜ì–‘"], "answer": "ì¹˜íƒ€"},
    {"question": "ê°€ì¥ ë†’ì´ ì‚¬ëŠ” ë™ë¬¼ì€?", "options": ["ë…ìˆ˜ë¦¬", "ê¸°ë¦°", "ì›ìˆ­ì´", "ë‹¤ëŒì¥"], "answer": "ê¸°ë¦°"},
    {"question": "ê³ ì–‘ì´ì˜ ë°œê°€ë½ì€ ëª‡ ê°œì¸ê°€?", "options": ["3ê°œ", "4ê°œ", "5ê°œ", "6ê°œ"], "answer": "5ê°œ"},
    {"question": "ê°œëŠ” ëª‡ ê°œì˜ ì –ë‹ˆê°€ ìˆëŠ”ê°€?", "options": ["28ê°œ", "32ê°œ", "42ê°œ", "44ê°œ"], "answer": "42ê°œ"},
    {"question": "ë‹­ì€ ì•Œì„ ì–¼ë§ˆë‚˜ ìì£¼ ë‚³ëŠ”ê°€?", "options": ["ë§¤ì¼", "ì¼ì£¼ì¼ì— í•œ ë²ˆ", "í•œ ë‹¬ì— í•œ ë²ˆ", "ê³„ì ˆì— í•œ ë²ˆ"], "answer": "ë§¤ì¼"},
    {"question": "ë‚˜ë¹„ëŠ” ë¨¹ì´ë¥¼ ì–´ë–»ê²Œ ì„­ì·¨í•˜ëŠ”ê°€?", "options": ["ì…ìœ¼ë¡œ", "ë¹¨ëŒ€ ê°™ì€ ì…ìœ¼ë¡œ", "ì½”ë¡œ", "í”¼ë¶€ë¡œ"], "answer": "ë¹¨ëŒ€ ê°™ì€ ì…ìœ¼ë¡œ"},
    {"question": "ê±°ë¯¸ëŠ” ëª‡ ê°œì˜ ë‹¤ë¦¬ê°€ ìˆëŠ”ê°€?", "options": ["4ê°œ", "6ê°œ", "8ê°œ", "10ê°œ"], "answer": "8ê°œ"},
    {"question": "ë²Œì€ ì¶¤ì„ ì™œ ì¶”ëŠ”ê°€?", "options": ["ë†€ê¸° ìœ„í•´", "ë¨¹ì´ ìœ„ì¹˜ë¥¼ ì•Œë¦¬ê¸° ìœ„í•´", "ì§ì§“ê¸°ë¥¼ ìœ„í•´", "ì‹ í˜¸ë¥¼ ë³´ë‚´ê¸° ìœ„í•´"], "answer": "ë¨¹ì´ ìœ„ì¹˜ë¥¼ ì•Œë¦¬ê¸° ìœ„í•´"},
    {"question": "ëŒê³ ë˜ëŠ” ì–´ë–¤ ì¢…ë¥˜ì˜ ë™ë¬¼ì¸ê°€?", "options": ["ë¬¼ê³ ê¸°", "í¬ìœ ë¥˜", "ì–‘ì„œë¥˜", "íŒŒì¶©ë¥˜"], "answer": "í¬ìœ ë¥˜"},
    {"question": "í­ê·„ì€ ì–´ë””ì— ì‚¬ëŠ”ê°€?", "options": ["ë¶ê·¹", "ë‚¨ê·¹", "ì‚¬ë§‰", "ì‚°"], "answer": "ë‚¨ê·¹"},
    {"question": "ë‚™íƒ€ì˜ ë“±ì— ìˆëŠ” í˜¹ì€ ëª‡ ê°œì¸ê°€?", "options": ["1ê°œ", "2ê°œ", "3ê°œ", "4ê°œ"], "answer": "1ê°œ"},
    {"question": "ë„ë§ˆë±€ì€ ê¼¬ë¦¬ë¥¼ ìƒìœ¼ë©´ ì–´ë–»ê²Œ í•˜ëŠ”ê°€?", "options": ["ì£½ëŠ”ë‹¤", "ë‹¤ì‹œ ìë€ë‹¤", "ì˜ì›íˆ ì—†ë‹¤", "ë‹¤ë¥¸ ê¼¬ë¦¬ë¥¼ ì°¾ëŠ”ë‹¤"], "answer": "ë‹¤ì‹œ ìë€ë‹¤"},
    {"question": "ë…ìˆ˜ë¦¬ì˜ ëˆˆì€ ì¸ê°„ì˜ ëˆˆë³´ë‹¤ ì–¼ë§ˆë‚˜ ì¢‹ì€ê°€?", "options": ["2ë°°", "4ë°°", "8ë°°", "10ë°°"], "answer": "8ë°°"},
    {"question": "ë°•ì¥ëŠ” ì–´ë‘  ì†ì—ì„œ ì–´ë–»ê²Œ ì´ë™í•˜ëŠ”ê°€?", "options": ["í›„ê°ìœ¼ë¡œ", "ì´ˆìŒíŒŒë¡œ", "ì—´ê°ì§€ë¡œ", "ìê¸°ì¥ìœ¼ë¡œ"], "answer": "ì´ˆìŒíŒŒë¡œ"},
    
    # ìŒì‹ê³¼ ìŒë£Œ (15ê°œ)
    {"question": "ìš°ìœ ëŠ” ì–´ëŠ ìƒ‰ê¹”ì¸ê°€?", "options": ["ë…¸ë€ìƒ‰", "í°ìƒ‰", "ì˜…ì€ íŒŒë€ìƒ‰", "íˆ¬ëª…"], "answer": "í°ìƒ‰"},
    {"question": "ì‚¬ê³¼ë¥¼ ìë¥´ë©´ ë‚´ë¶€ëŠ” ë¬´ì—‡ìƒ‰ì¸ê°€?", "options": ["ë…¸ë€ìƒ‰", "í°ìƒ‰", "ì´ˆë¡ìƒ‰", "ê°ˆìƒ‰"], "answer": "í°ìƒ‰"},
    {"question": "ë‹¹ê·¼ì˜ ìƒ‰ê¹”ì€?", "options": ["ë…¸ë€ìƒ‰", "ì£¼í™©ìƒ‰", "ë¹¨ê°„ìƒ‰", "ì´ˆë¡ìƒ‰"], "answer": "ì£¼í™©ìƒ‰"},
    {"question": "í¬ë„ëŠ” ì–´ë–¤ ìƒ‰ì¸ê°€?", "options": ["ë…¸ë€ìƒ‰", "ì´ˆë¡ìƒ‰ ë˜ëŠ” ìì£¼ìƒ‰", "ë¹¨ê°„ìƒ‰", "ì£¼í™©ìƒ‰"], "answer": "ì´ˆë¡ìƒ‰ ë˜ëŠ” ìì£¼ìƒ‰"},
    {"question": "ë°”ë‚˜ë‚˜ì˜ ìƒ‰ê¹”ì€?", "options": ["ì´ˆë¡ìƒ‰", "ë…¸ë€ìƒ‰", "ì£¼í™©ìƒ‰", "í°ìƒ‰"], "answer": "ë…¸ë€ìƒ‰"},
    {"question": "ì²´ë¦¬ëŠ” ì‘ì€ ê³¼ì¼ì´ë‹¤. ë§ëŠ”ê°€?", "options": ["ë§ë‹¤", "í‹€ë ¸ë‹¤"], "answer": "ë§ë‹¤"},
    {"question": "ìˆ˜ë°•ì€ ì–´ëŠ ê³„ì ˆ ê³¼ì¼ì¸ê°€?", "options": ["ë´„", "ì—¬ë¦„", "ê°€ì„", "ê²¨ìš¸"], "answer": "ì—¬ë¦„"},
    {"question": "ì†Œê¸ˆì€ ì–´ë””ì„œ ì–»ëŠ”ê°€?", "options": ["ì‚°", "ê´‘ì‚°", "ë°”ë‹¤", "í˜¸ìˆ˜"], "answer": "ë°”ë‹¤"},
    {"question": "ë¹µì€ ì–´ë–¤ ì¬ë£Œë¡œ ë§Œë“œëŠ”ê°€?", "options": ["ìŒ€", "ì˜¥ìˆ˜ìˆ˜", "ë°€", "ë³´ë¦¬"], "answer": "ë°€"},
    {"question": "ì½”ì½”ë„›ì€ ì–´ëŠ ì‹ë¬¼ì—ì„œ ë‚˜ëŠ”ê°€?", "options": ["ìˆ˜í’€", "ë¤ë¶ˆ", "ë‚˜ë¬´", "ì”ë””"], "answer": "ë‚˜ë¬´"},
    {"question": "ì´ˆì½œë¦¿ì˜ ì£¼ì›ë£ŒëŠ”?", "options": ["ë”¸ê¸°", "ì½”ì½”ì•„", "ì»¤í”¼", "ë°”ë‹ë¼"], "answer": "ì½”ì½”ì•„"},
    {"question": "ì¹˜ì¦ˆëŠ” ë¬´ì—‡ìœ¼ë¡œ ë§Œë“œëŠ”ê°€?", "options": ["ë°€", "ìš°ìœ ", "ê³„ë€", "ë²„í„°"], "answer": "ìš°ìœ "},
    {"question": "ë‹¬ê±€ì€ ì–´ëŠ ë™ë¬¼ì—ì„œ ë‚˜ì˜¤ëŠ”ê°€?", "options": ["ì˜¤ë¦¬", "ë‹­", "ê±°ìœ„", "ëª¨ë‘"], "answer": "ëª¨ë‘"},
    {"question": "ë²Œê¿€ì€ ëˆ„ê°€ ë§Œë“œëŠ”ê°€?", "options": ["ê°œë¯¸", "ë‚˜ë¹„", "ë²Œ", "ê±°ë¯¸"], "answer": "ë²Œ"},
    {"question": "ì˜¬ë¦¬ë¸ŒëŠ” ì–´ë””ì„œ ì¬ë°°ë˜ëŠ”ê°€?", "options": ["ë¶ê·¹", "ì§€ì¤‘í•´", "ì‚¬ë§‰", "ì—´ëŒ€ìš°ë¦¼"], "answer": "ì§€ì¤‘í•´"},
    
    # ê³¼í•™ê³¼ ìì—° (20ê°œ)
    {"question": "ìˆ˜ì†Œì™€ ì‚°ì†Œê°€ í•©ì³ì§€ë©´ ë¬´ì—‡ì´ ë˜ëŠ”ê°€?", "options": ["ì†Œê¸ˆ", "ì„¤íƒ•", "ë¬¼", "ê¸°ë¦„"], "answer": "ë¬¼"},
    {"question": "ë‚˜ë¬´ëŠ” ë¬´ì—‡ì„ ë‚´ë³´ë‚´ëŠ”ê°€?", "options": ["ì´ì‚°í™”íƒ„ì†Œ", "ì‚°ì†Œ", "ì§ˆì†Œ", "í—¬ë¥¨"], "answer": "ì‚°ì†Œ"},
    {"question": "ì¸ê°„ì€ ë¬´ì—‡ì„ ë“¤ì´ë§ˆì‹œëŠ”ê°€?", "options": ["ì‚°ì†Œ", "ì´ì‚°í™”íƒ„ì†Œ", "ì§ˆì†Œ", "ì§ˆì†Œ"], "answer": "ì‚°ì†Œ"},
    {"question": "ì§€êµ¬ëŠ” íƒœì–‘ ì£¼ìœ„ë¥¼ ë„ëŠ”ê°€?", "options": ["ì˜ˆ", "ì•„ë‹ˆìš”"], "answer": "ì˜ˆ"},
    {"question": "ë‹¬ì€ ì§€êµ¬ ì£¼ìœ„ë¥¼ ë„ëŠ”ê°€?", "options": ["ì˜ˆ", "ì•„ë‹ˆìš”"], "answer": "ì˜ˆ"},
    {"question": "ë¬´ì§€ê°œëŠ” ë¹„ í›„ì— ì–¸ì œ ë‚˜íƒ€ë‚˜ëŠ”ê°€?", "options": ["ë°¤", "í–‡ë¹›ì´ ìˆì„ ë•Œ", "íë¦° ë‚ ", "ìƒˆë²½"], "answer": "í–‡ë¹›ì´ ìˆì„ ë•Œ"},
    {"question": "ë²ˆê°œëŠ” ë¹ ë¥¸ê°€?", "options": ["ëŠë¦¬ë‹¤", "ë§¤ìš° ë¹ ë¥´ë‹¤"], "answer": "ë§¤ìš° ë¹ ë¥´ë‹¤"},
    {"question": "ìŒí–¥ ì†ë„ëŠ” ë¹› ì†ë„ë³´ë‹¤ ë¹ ë¥¸ê°€?", "options": ["ì˜ˆ", "ì•„ë‹ˆìš”"], "answer": "ì•„ë‹ˆìš”"},
    {"question": "ìì„ì˜ ì–‘ìª½ ëì„ ë¬´ì—‡ì´ë¼ê³  í•˜ëŠ”ê°€?", "options": ["ì¤‘ì‹¬", "ê·¹", "ê²½ê³„", "í…Œë‘ë¦¬"], "answer": "ê·¹"},
    {"question": "ë‚¨ê·¹ê³¼ ë¶ê·¹ ì¤‘ ë” ì¶”ìš´ ê³³ì€?", "options": ["ë‚¨ê·¹", "ë¶ê·¹", "ê°™ìŒ", "ê³„ì ˆì— ë”°ë¼ ë‹¤ë¦„"], "answer": "ë‚¨ê·¹"},
    {"question": "í™”ì‚°ì€ ì–´ë””ì—ì„œ ë‚˜ì˜¨ ìš©ì•”ì„ ë¶„ì¶œí•˜ëŠ”ê°€?", "options": ["ì§€í‘œë©´", "ì§€êµ¬ ë‚´ë¶€", "í•˜ëŠ˜", "ë°”ë‹¤ ë°‘"], "answer": "ì§€êµ¬ ë‚´ë¶€"},
    {"question": "ì§€ì§„ì€ ë¬´ì—‡ì˜ ì›€ì§ì„ìœ¼ë¡œ ì¼ì–´ë‚˜ëŠ”ê°€?", "options": ["êµ¬ë¦„", "ë°”ë‹¤", "ì§€êµ¬íŒ", "ë°”ëŒ"], "answer": "ì§€êµ¬íŒ"},
    {"question": "êµ¬ë¦„ì€ ë¬¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆëŠ”ê°€?", "options": ["ì˜ˆ", "ì•„ë‹ˆìš”"], "answer": "ì˜ˆ"},
    {"question": "ëˆˆì€ ë¬´ì—‡ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆëŠ”ê°€?", "options": ["ì–¼ìŒ", "ë¬¼", "ì†Œê¸ˆ", "ëª¨ë˜"], "answer": "ì–¼ìŒ"},
    {"question": "ë°”ëŒì€ ë³´ì´ëŠ”ê°€?", "options": ["ì˜ˆ", "ì•„ë‹ˆìš”"], "answer": "ì•„ë‹ˆìš”"},
    {"question": "ì†Œë¦¬ëŠ” ì–´ë–»ê²Œ ì´ë™í•˜ëŠ”ê°€?", "options": ["ë¹›ì²˜ëŸ¼", "íŒŒë™ìœ¼ë¡œ", "ì§ì„ ìœ¼ë¡œ", "ë‚˜ì„ í˜•ìœ¼ë¡œ"], "answer": "íŒŒë™ìœ¼ë¡œ"},
    {"question": "ì² ì€ ìì„ì— ëŒë¦¬ëŠ”ê°€?", "options": ["ì˜ˆ", "ì•„ë‹ˆìš”"], "answer": "ì˜ˆ"},
    {"question": "ê¸ˆì€ ìì„ì— ëŒë¦¬ëŠ”ê°€?", "options": ["ì˜ˆ", "ì•„ë‹ˆìš”"], "answer": "ì•„ë‹ˆìš”"},
    {"question": "ë¬¼ê³ ê¸°ëŠ” íê°€ ìˆëŠ”ê°€?", "options": ["ì˜ˆ", "ì•„ë‹ˆìš”"], "answer": "ì•„ë‹ˆìš”"},
    {"question": "ë‚˜ë­‡ìì€ ì™œ ì´ˆë¡ìƒ‰ì¸ê°€?", "options": ["ì—½ë¡ì†Œ ë•Œë¬¸ì—", "íƒœì–‘ ë•Œë¬¸ì—", "ì‚°ì†Œ ë•Œë¬¸ì—", "ë¬¼ ë•Œë¬¸ì—"], "answer": "ì—½ë¡ì†Œ ë•Œë¬¸ì—"},
    
    # ì¼ìƒìƒí™œ (15ê°œ)
    {"question": "ì‹ ë°œì€ ë°œì— ì‹ ëŠ” ê²ƒì´ë‹¤. ë§ëŠ”ê°€?", "options": ["ë§ë‹¤", "í‹€ë ¸ë‹¤"], "answer": "ë§ë‹¤"},
    {"question": "ì˜ìëŠ” ì•‰ëŠ” ê²ƒì¸ê°€?", "options": ["ì˜ˆ", "ì•„ë‹ˆìš”"], "answer": "ì˜ˆ"},
    {"question": "ì¹¨ëŒ€ëŠ” ì–´ë””ì— ìˆëŠ”ê°€?", "options": ["ê±°ì‹¤", "ì£¼ë°©", "ì¹¨ì‹¤", "ìš•ì‹¤"], "answer": "ì¹¨ì‹¤"},
    {"question": "ì†ì„ ê¹¨ë—ì´ í•˜ê¸° ìœ„í•´ ë¬´ì—‡ì„ ì‚¬ìš©í•˜ëŠ”ê°€?", "options": ["ëª¨ë˜", "ì°°í™", "ë¹„ëˆ„", "ë¨¼ì§€"], "answer": "ë¹„ëˆ„"},
    {"question": "ì´ë¥¼ ë‹¦ê¸° ìœ„í•´ ë¬´ì—‡ì„ ì‚¬ìš©í•˜ëŠ”ê°€?", "options": ["ì¹¼", "ë¹—", "ì¹«ì†”", "ìˆŸê°€ë½"], "answer": "ì¹«ì†”"},
    {"question": "ì˜·ì„ ì„¸íƒí•˜ê¸° ìœ„í•´ ë¬´ì—‡ì´ í•„ìš”í•œê°€?", "options": ["ëª¨ë˜", "ë¹„ëˆ„", "ì†Œê¸ˆ", "ì„¤íƒ•"], "answer": "ë¹„ëˆ„"},
    {"question": "ì§‘ì˜ ì°½ë¬¸ì€ ë¬´ì—‡ìœ¼ë¡œ ë˜ì–´ ìˆëŠ”ê°€?", "options": ["ì¢…ì´", "ì²œ", "ìœ ë¦¬", "í”Œë¼ìŠ¤í‹±"], "answer": "ìœ ë¦¬"},
    {"question": "ë¬¸ì€ ë¬´ì—‡ìœ¼ë¡œ ë§Œë“œëŠ”ê°€?", "options": ["ì¢…ì´", "ë‚˜ë¬´ ë˜ëŠ” ê¸ˆì†", "ëŒ", "í™"], "answer": "ë‚˜ë¬´ ë˜ëŠ” ê¸ˆì†"},
    {"question": "ì „ë“±ì€ ì–´ë””ì— ë¶™ì–´ìˆëŠ”ê°€?", "options": ["ë°”ë‹¥", "ë²½", "ì²œì¥", "ë¬¸"], "answer": "ì²œì¥"},
    {"question": "ëƒ‰ì¥ê³ ëŠ” ìŒì‹ì„ ì–´ë–»ê²Œ í•˜ëŠ”ê°€?", "options": ["ìš”ë¦¬í•œë‹¤", "ì‹íŒë‹¤", "ì‚¶ëŠ”ë‹¤", "ë§ˆë¥¸ë‹¤"], "answer": "ì‹íŒë‹¤"},
    {"question": "ì „ìë ˆì¸ì§€ëŠ” ìŒì‹ì„ ì–´ë–»ê²Œ í•˜ëŠ”ê°€?", "options": ["ì‹íŒë‹¤", "ë°ìš´ë‹¤", "ì‚¶ëŠ”ë‹¤", "ë§ë¦°ë‹¤"], "answer": "ë°ìš´ë‹¤"},
    {"question": "ì„¸íƒê¸°ëŠ” ë¬´ì—‡ì„ ì„¸íƒí•˜ëŠ”ê°€?", "options": ["ê·¸ë¦‡", "ì˜·", "ë¨¸ë¦¬", "ì†"], "answer": "ì˜·"},
    {"question": "ì‹œê³„ëŠ” ë¬´ì—‡ì„ ì•Œë ¤ì£¼ëŠ”ê°€?", "options": ["ë‚ ì”¨", "ì‹œê°„", "ì˜¨ë„", "ê±°ë¦¬"], "answer": "ì‹œê°„"},
    {"question": "ì˜¨ë„ê³„ëŠ” ë¬´ì—‡ì„ ì¸¡ì •í•˜ëŠ”ê°€?", "options": ["ë¬´ê²Œ", "ê¸¸ì´", "ì˜¨ë„", "ì‹œê°„"], "answer": "ì˜¨ë„"},
    {"question": "ì €ìš¸ì€ ë¬´ì—‡ì„ ì¸¡ì •í•˜ëŠ”ê°€?", "options": ["ê¸¸ì´", "ë¬´ê²Œ", "ì‹œê°„", "ì˜¨ë„"], "answer": "ë¬´ê²Œ"},
    
    # ìƒ‰ìƒê³¼ ìˆ«ì (15ê°œ)
    {"question": "ì†Œë°©ì°¨ì˜ ìƒ‰ê¹”ì€?", "options": ["íŒŒë€ìƒ‰", "ë…¸ë€ìƒ‰", "ë¹¨ê°„ìƒ‰", "ë…¹ìƒ‰"], "answer": "ë¹¨ê°„ìƒ‰"},
    {"question": "ì‹ í˜¸ë“±ì—ì„œ ì •ì§€ë¥¼ ì˜ë¯¸í•˜ëŠ” ìƒ‰ì€?", "options": ["ì´ˆë¡ìƒ‰", "ë…¸ë€ìƒ‰", "ë¹¨ê°„ìƒ‰", "íŒŒë€ìƒ‰"], "answer": "ë¹¨ê°„ìƒ‰"},
    {"question": "ì‹ í˜¸ë“±ì—ì„œ í†µí–‰ì„ ì˜ë¯¸í•˜ëŠ” ìƒ‰ì€?", "options": ["ë¹¨ê°„ìƒ‰", "ë…¸ë€ìƒ‰", "ì´ˆë¡ìƒ‰", "íŒŒë€ìƒ‰"], "answer": "ì´ˆë¡ìƒ‰"},
    {"question": "ì‹ í˜¸ë“±ì—ì„œ ì£¼ì˜ë¥¼ ì˜ë¯¸í•˜ëŠ” ìƒ‰ì€?", "options": ["ë¹¨ê°„ìƒ‰", "ë…¸ë€ìƒ‰", "ì´ˆë¡ìƒ‰", "íŒŒë€ìƒ‰"], "answer": "ë…¸ë€ìƒ‰"},
    {"question": "í•˜ëŠ˜ì˜ ìƒ‰ì€?", "options": ["ì´ˆë¡ìƒ‰", "ë…¸ë€ìƒ‰", "íŒŒë€ìƒ‰", "ë¹¨ê°„ìƒ‰"], "answer": "íŒŒë€ìƒ‰"},
    {"question": "í’€ì˜ ìƒ‰ì€?", "options": ["íŒŒë€ìƒ‰", "ë¹¨ê°„ìƒ‰", "ì´ˆë¡ìƒ‰", "ë…¸ë€ìƒ‰"], "answer": "ì´ˆë¡ìƒ‰"},
    {"question": "ëˆˆì˜ ìƒ‰ì€?", "options": ["ê²€ì€ìƒ‰", "íšŒìƒ‰", "í°ìƒ‰", "ëª¨ë‘"], "answer": "ëª¨ë‘"},
    {"question": "ìˆ«ì 10ì€ í•œ ìë¦¬ì¸ê°€?", "options": ["ì˜ˆ", "ì•„ë‹ˆìš”"], "answer": "ì•„ë‹ˆìš”"},
    {"question": "100ì€ ëª‡ ìë¦¬ ìˆ«ìì¸ê°€?", "options": ["1ìë¦¬", "2ìë¦¬", "3ìë¦¬", "4ìë¦¬"], "answer": "3ìë¦¬"},
    {"question": "0ì€ ì–‘ìˆ˜ì¸ê°€?", "options": ["ì˜ˆ", "ì•„ë‹ˆìš”"], "answer": "ì•„ë‹ˆìš”"},
    {"question": "1 + 1 = ?", "options": ["1", "2", "3", "4"], "answer": "2"},
    {"question": "10 - 5 = ?", "options": ["3", "4", "5", "6"], "answer": "5"},
    {"question": "2 Ã— 3 = ?", "options": ["5", "6", "7", "8"], "answer": "6"},
    {"question": "10 Ã· 2 = ?", "options": ["3", "4", "5", "6"], "answer": "5"},
    {"question": "ê°€ì¥ ì‘ì€ í™€ìˆ˜ëŠ”?", "options": ["0", "1", "2", "3"], "answer": "1"}
]

# ê²Œì„ ì‹œì‘ ì‹œ 100ê°œ ë¬¸ì œ ì¤‘ 5ê°œë¥¼ ëœë¤ìœ¼ë¡œ ì„ íƒ
def get_quiz_questions():
    return random.sample(ALL_QUIZ_QUESTIONS, min(5, len(ALL_QUIZ_QUESTIONS)))

# --- 2. ê²Œì„ ì´ˆê¸°í™” ë° ìƒíƒœ ê´€ë¦¬ ---
def initialize_quiz():
    st.session_state.quiz_questions = get_quiz_questions()
    st.session_state.question_index = 0
    st.session_state.score = 0
    st.session_state.feedback = ""
    st.session_state.answered = False
    st.session_state.game_over = False

if 'question_index' not in st.session_state:
    initialize_quiz()

# --- 3. ê²Œì„ ë¡œì§ í•¨ìˆ˜ ---
def submit_answer(question, selected_option):
    if st.session_state.answered:  # ì´ë¯¸ ë‹µë³€í–ˆë‹¤ë©´ ë¬´ì‹œ
        return

    st.session_state.answered = True
    if selected_option == question["answer"]:
        st.session_state.score += 1
        st.session_state.feedback = "âœ… ì •ë‹µì…ë‹ˆë‹¤!"
    else:
        st.session_state.feedback = f"âŒ ì˜¤ë‹µì…ë‹ˆë‹¤. ì •ë‹µì€ '{question['answer']}'ì˜€ìŠµë‹ˆë‹¤."
    
    # 1ì´ˆ í›„ ìë™ìœ¼ë¡œ ë‹¤ìŒ ë¬¸ì œë¡œ ë„˜ì–´ê°
    import time
    time.sleep(1)
    next_question()

def next_question():
    st.session_state.question_index += 1
    st.session_state.answered = False
    st.session_state.feedback = ""

    if st.session_state.question_index >= len(st.session_state.quiz_questions):
        st.session_state.game_over = True
    st.rerun()

def reset_quiz():
    initialize_quiz()
    st.rerun()

# --- 4. ê²Œì„ í™”ë©´ êµ¬ì„± ---
st.title("ğŸ§  ê°„ë‹¨í•œ í€´ì¦ˆ")

if st.session_state.game_over:
    st.balloons()  # ê²Œì„ ì™„ë£Œ ì‹œ ì¶•í•˜ í’ì„ 
    
    # ì ìˆ˜ ê³„ì‚°
    total_questions = len(st.session_state.quiz_questions)
    percentage = (st.session_state.score / total_questions) * 100
    
    # ì ìˆ˜ í‘œì‹œ
    col1, col2, col3 = st.columns(3)
    with col1:
        st.metric("ë§ì¶˜ ê°œìˆ˜", f"{st.session_state.score}/{total_questions}")
    with col2:
        st.metric("ì •ë‹µë¥ ", f"{percentage:.1f}%")
    with col3:
        if percentage == 100:
            st.metric("ë“±ê¸‰", "ğŸ† ì™„ë²½!")
        elif percentage >= 80:
            st.metric("ë“±ê¸‰", "â­ í›Œë¥­í•¨")
        elif percentage >= 60:
            st.metric("ë“±ê¸‰", "ğŸ‘ ì¢‹ìŒ")
        else:
            st.metric("ë“±ê¸‰", "ğŸ“š ë‹¤ì‹œ í’€ê¸°")
    
    st.divider()
    st.success(f"í€´ì¦ˆê°€ ëë‚¬ìŠµë‹ˆë‹¤! ìµœì¢… ì ìˆ˜: {st.session_state.score} / {total_questions} ({percentage:.1f}%)")
    
    if st.button("ë‹¤ì‹œ ì‹œì‘"):
        reset_quiz()
else:
    current_question = st.session_state.quiz_questions[st.session_state.question_index]

    st.subheader(f"ë¬¸ì œ {st.session_state.question_index + 1}. {current_question['question']}")

    # ì§ˆë¬¸ê³¼ ì˜µì…˜ í‘œì‹œ
    selected_option = st.radio(
        "ë‹µë³€ì„ ì„ íƒí•˜ì„¸ìš”:",
        options=current_question['options'],
        key=f"q_{st.session_state.question_index}_radio",
        disabled=st.session_state.answered
    )

    # ë‹µë³€ ì œì¶œ ë²„íŠ¼
    if not st.session_state.answered:
        if st.button("ë‹µë³€ ì œì¶œ", type="primary", use_container_width=True):
            submit_answer(current_question, selected_option)
    else:  # ë‹µë³€ í›„ í”¼ë“œë°± ë° ë‹¤ìŒ ë¬¸ì œ ë²„íŠ¼
        if st.session_state.feedback.startswith("âœ…"):
            st.success(st.session_state.feedback)
        else:
            st.error(st.session_state.feedback)

        if st.button("ë‹¤ìŒ ë¬¸ì œ", use_container_width=True):
            next_question()

st.sidebar.markdown(f"**í˜„ì¬ ì ìˆ˜: {st.session_state.score} / {len(st.session_state.quiz_questions)}**")
st.sidebar.markdown(f"**ì§„í–‰ë„: {st.session_state.question_index} / {len(st.session_state.quiz_questions)}**")

# ë°°ë„ˆ ì¶”ê°€
st.markdown("""
<div style='text-align: center; margin: 20px 0;'>
    <a href="https://link.coupang.com/a/dP9eTe" target="_blank" referrerpolicy="unsafe-url"><img src="https://ads-partners.coupang.com/banners/966772?subId=&traceId=V0-301-879dd1202e5c73b2-I966772&w=320&h=50" alt=""></a>
</div>
""", unsafe_allow_html=True)

# ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ ì•ˆë‚´ ë¬¸êµ¬ ì¶”ê°€
st.markdown("<p style='text-align: center; font-size: 0.8em;'>â€» ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ í™œë™ì„ í†µí•´ ì¼ì •ì•¡ì˜ ìˆ˜ìˆ˜ë£Œë¥¼ ì œê³µë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>", unsafe_allow_html=True)

# ì‚¬ì´ë“œë°”ì— iframe ë°°ë„ˆ ì¶”ê°€
st.sidebar.markdown("""
<div style='text-align: center; margin: 0px 0;'>
    <a href="https://link.coupang.com/a/dP9eTe" target="_blank" referrerpolicy="unsafe-url"><img src="https://ads-partners.coupang.com/banners/966772?subId=&traceId=V0-301-879dd1202e5c73b2-I966772&w=320&h=50" alt=""></a>
</div>
""", unsafe_allow_html=True)